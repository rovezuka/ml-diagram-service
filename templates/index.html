<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Diagram → Algorithm</title>
  <style>
    body { font-family: -apple-system, Arial, sans-serif; margin: 24px; }
    .row { display: flex; gap: 24px; }
    .card { border: 1px solid #ddd; padding: 16px; border-radius: 10px; width: 100%; }
    .muted { color: #666; font-size: 14px; }
    input[type=file] { width: 100%; }
    pre { background: #f7f7f7; padding: 12px; border-radius: 8px; overflow:auto; }
    button { padding: 10px 14px; border-radius: 8px; border: 1px solid #222; background: #222; color: white; cursor: pointer; }
    label { display:block; margin: 8px 0; }
  </style>
</head>
<body>
  <h1>Diagram → Algorithm</h1>
  <p class="muted">Загрузите изображение диаграммы и получите: (1) JSON, (2) текстовый алгоритм в табличном виде.</p>

  <div class="row">
    <div class="card">
      <h3>Загрузка</h3>
      <form action="/ui/parse" method="post" enctype="multipart/form-data">
        <label>Изображение (png/jpg/webp):</label>
        <input type="file" name="file" required />
        <label>
          <input type="checkbox" name="use_llm" value="true" {% if llm_enabled %}{% else %}disabled{% endif %}/>
          Использовать LLM (если включен в env)
        
        </label>
        <label>Engine:</label>
        <select name="engine">
          <option value="cv" selected>cv (OpenCV contours)</option>
          <option value="yolo_bpmn">yolo_bpmn (YOLO blocks + swimlanes + arrows)</option>
        </select>
        <br/><br/>
        <button type="submit">Распознать</button>
      </form>
      <p class="muted">LLM сейчас: <b>{{ "ON" if llm_enabled else "OFF" }}</b></p>
    </div>

    <div class="card">
      <h3>Формат текстового алгоритма</h3>
      <pre>Шаг | Роль
1. Создание запроса | Инициатор
2. ...             | Координатор</pre>
    </div>
  </div>

  <div class="card" style="margin-top:24px;">
    <h3>Ground truth для /v1/evaluate (пример)</h3>
    <pre>{{ example_gt }}</pre>
  </div>

</body>
</html>
